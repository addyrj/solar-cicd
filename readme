
# Always check what's running first
docker ps                      # List running containers
docker ps -a                   # List ALL containers (including stopped)
docker stats                   # Live resource usage (CPU, Memory)
docker images                  # List all images
docker volume ls               # List all volumes
docker network ls              # List all networks

# üîÑ Workflow B: Rebuild & Restart
docker compose down                   # Stop containers
docker compose build --no-cache       # Rebuild without cache
docker compose up -d                  # Start fresh

# üîÑ Workflow C: Full Reset (Keep Data)
docker compose down                   # Stop and remove containers
docker system prune -f                # Clean unused objects
docker compose build                  # Rebuild
docker compose up -d                  # Start

# üîÑ Workflow D: Nuclear Reset (Lose Data)
docker compose down -v --rmi all --remove-orphans  # Remove EVERYTHING
docker system prune -a --volumes -f   # Deep clean
docker compose build --no-cache       # Fresh build
docker compose up -d                  # Start


# Stop/Start specific
docker stop solar_backend && docker start solar_backend
docker stop $(docker ps -q)           # Stop all running
docker start $(docker ps -aq)         # Start all stopped

# Remove specific
docker rm solar_backend               # Remove container
docker rmi solar-cicd-backend         # Remove image
docker volume rm solar_client_mysql_data  # Remove volume

# 2Ô∏è‚É£ QUICK NAVIGATION & DEBUG
# ========================================
# Jump into containers
docker exec -it solar_backend bash      # Enter backend container
docker exec -it solar_mysql bash        # Enter MySQL container
docker exec -it solar_frontend sh       # Enter frontend container

# View logs
docker logs solar_backend --tail 50 -f  # Tail last 50 lines + follow
docker logs solar_mysql --tail 100      # Last 100 lines
docker logs solar_frontend              # View all logs

# 3Ô∏è‚É£ COMMON WORKFLOWS
# ========================================

# üîÑ Workflow A: Service Restart (Quick)
docker compose restart                # Restart all services
docker compose restart backend        # Restart specific service



# 4Ô∏è‚É£ DATABASE SPECIFIC
# ========================================
# MySQL Operations
docker exec -it solar_mysql mysql -u root -pyour_root_password
docker exec -it solar_mysql mysql -u root -p -e "SHOW DATABASES;"
docker exec -it solar_mysql mysql -u root -p -e "USE iot_solar; SHOW TABLES;"

# Backup database (from host)
docker exec solar_mysql mysqldump -u root -pyour_root_password iot_solar > backup.sql

# Restore database
docker exec -i solar_mysql mysql -u root -pyour_root_password iot_solar < backup.sql

# 5Ô∏è‚É£ CONTAINER MANAGEMENT (Granular)
# ========================================


# 6Ô∏è‚É£ CLEANUP STRATEGIES
# ========================================
# Level 1: Light cleanup
docker system prune -f

# Level 2: Medium cleanup (keeps volumes)
docker system prune -a -f

# Level 3: Deep cleanup (removes volumes - DATA LOSS!)
docker system prune -a --volumes -f

# Level 4: Complete reset
docker-compose down -v --rmi all --remove-orphans
docker system prune -a --volumes -f
docker volume rm $(docker volume ls -q) 2>/dev/null || true

# 7Ô∏è‚É£ MONITORING & INSPECTION
# ========================================
# Container details
docker inspect solar_backend
docker inspect -f '{{range.NetworkSettings.Networks}}{{.IPAddress}}{{end}}' solar_backend

# Resource monitoring
docker stats --format "table {{.Name}}\t{{.CPUPerc}}\t{{.MemUsage}}\t{{.NetIO}}\t{{.BlockIO}}"

# Process list inside container
docker top solar_backend

# 8Ô∏è‚É£ DOCKER COMPOSE SPECIFIC
# ========================================
# View logs
docker compose logs -f               # All services
docker compose logs -f backend       # Single service
docker compose logs --tail=50 -f     # Last 50 lines

# Service management
docker compose ps                    # Show compose services status
docker compose config                # Validate compose file
docker compose pull                  # Pull latest images
docker compose pause                 # Pause all services
docker compose unpause               # Unpause all services

# 9Ô∏è‚É£ FILE OPERATIONS
# ========================================
# Copy files
docker cp solar_backend:/app/config.json ./config-backup.json
docker cp ./updated-config.json solar_backend:/app/config.json

# 1Ô∏è‚É£0Ô∏è‚É£ NETWORK OPERATIONS
# ========================================
docker network inspect bridge
docker network create my_app_network
docker network connect my_app_network solar_backend
docker network disconnect my_app_network solar_backend

# ========================================
# üéØ QUICK REFERENCE - MOST USED COMMANDS
# ========================================

# Daily drivers:
# docker compose logs -f
# docker compose restart
# docker exec -it [container] bash
# docker compose down && docker compose up -d

# Weekly cleanup:
# docker system prune -f
# docker compose down -v

# Monthly reset:
# docker compose down -v --rmi all --remove-orphans

# Emergency:
# docker stop $(docker ps -q)
# docker system prune -a --volumes -f